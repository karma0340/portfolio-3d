import{u as f,j as e,C as h,O as m,H as x,P as p,b as d,A as g}from"./three-6Y24DM0h.js";import{b as o,R as j}from"./vendor-C-O1d60-.js";class l{static instance;contexts=new Set;maxContexts=25;constructor(){}static getInstance(){return l.instance||(l.instance=new l),l.instance}register(t){return this.contexts.size>=this.maxContexts?(console.warn(`WebGL context limit reached (${this.maxContexts}). Consider reducing Canvas instances.`),!1):(this.contexts.add(t),!0)}unregister(t){this.contexts.delete(t)}getActiveContextCount(){return this.contexts.size}canCreateContext(){return this.contexts.size<this.maxContexts}}const v=()=>{const n=o.useRef(null),t=l.getInstance();return o.useEffect(()=>()=>{n.current&&t.unregister(n.current)},[t]),{contextRef:n,registerContext:a=>t.register(a)?(n.current=a,!0):!1,canCreate:()=>t.canCreateContext()}},C=({isMobile:n,onLoaded:t})=>{const a=d("/desktop_pc/scene.gltf?v=3"),[c,u]=o.useState(!1);return j.useLayoutEffect(()=>{a.scene&&a.scene.traverse(i=>{if(i.isMesh){const s=i,r=s.name.toLowerCase();(r.includes("case")||r.includes("tower")||r.includes("pc")||r.includes("body")||r.includes("cabinet")||r.includes("chassis")||r.includes("frame"))&&s.material&&(s.material=s.material.clone(),s.material.color.set("#ffffff"),s.material.roughness!==void 0&&(s.material.roughness=.2),s.material.metalness!==void 0&&(s.material.metalness=.1))}})},[a.scene]),o.useEffect(()=>{a.scene&&!c&&(u(!0),t?.())},[a.scene,c,t]),e.jsxs("mesh",{children:[e.jsx("hemisphereLight",{intensity:.5,groundColor:"black"}),e.jsx("pointLight",{intensity:3,position:[0,5,0]}),e.jsx("spotLight",{position:[-20,50,10],angle:.12,penumbra:1,intensity:2,castShadow:!0,"shadow-mapSize":1024}),e.jsx("ambientLight",{intensity:.7}),e.jsx("directionalLight",{intensity:1,position:[5,5,5]}),e.jsx("primitive",{object:a.scene,scale:n?[.6,.6,.6]:[.8,.8,.8],position:n?[0,-1.5,-1.5]:[0,-2,-.5],rotation:[-.01,-.2,-.1]})]})},P=()=>{const[n,t]=o.useState(!1),{progress:a}=f(),c=v(),u=()=>{};return o.useEffect(()=>{const i=window.matchMedia("(max-width: 500px)");t(i.matches);const s=r=>{t(r.matches)};return i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[]),e.jsxs(h,{shadows:!0,frameloop:"always",dpr:[1,2],camera:{position:[10,3,5],fov:30},gl:{preserveDrawingBuffer:!0,antialias:!0,powerPreference:"high-performance",alpha:!1,stencil:!1,depth:!0,failIfMajorPerformanceCaveat:!1},style:{pointerEvents:"auto",touchAction:"none"},onCreated:({gl:i})=>{const s=i.getContext();s&&c.registerContext&&c.registerContext(s)},children:[e.jsxs(o.Suspense,{fallback:e.jsx(x,{center:!0,children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[e.jsx("div",{className:"text-white text-2xl font-bold mb-4",children:"Loading 3D Model..."}),e.jsxs("div",{className:"text-white text-lg",children:[Math.round(a),"%"]}),e.jsx("div",{className:"w-48 h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${a}%`}})})]})}),children:[e.jsx(m,{enablePan:!0,enableZoom:!0,enableRotate:!0,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/4,maxDistance:10,minDistance:3}),e.jsx(C,{isMobile:n,onLoaded:u})]}),e.jsx(p,{all:!0})]})};d.preload("/desktop_pc/scene.gltf?v=3");const b=()=>{const n=d("/planet/scene.gltf");return e.jsx("primitive",{object:n.scene,scale:2.5,"position-y":0,"rotation-y":0})},E=()=>{const{progress:n}=f();return e.jsx(h,{shadows:!0,frameloop:"demand",dpr:1,gl:{preserveDrawingBuffer:!1,antialias:!1,powerPreference:"high-performance",alpha:!1,stencil:!1,depth:!0,failIfMajorPerformanceCaveat:!1},camera:{fov:45,near:.1,far:200,position:[-4,3,6]},onCreated:({gl:t})=>{t.toneMapping=g,t.toneMappingExposure=.5},children:e.jsxs(o.Suspense,{fallback:e.jsx(x,{center:!0,children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[e.jsx("div",{className:"text-white text-2xl font-bold mb-4",children:"Loading Earth Model..."}),e.jsxs("div",{className:"text-white text-lg",children:[Math.round(n),"%"]}),e.jsx("div",{className:"w-48 h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${n}%`}})})]})}),children:[e.jsx(m,{autoRotate:!0,enablePan:!1,enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),e.jsx(b,{}),e.jsx(p,{all:!0})]})})};d.preload("/planet/scene.gltf");export{P as C,E};
