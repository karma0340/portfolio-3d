import{u,j as e,C as h,O as x,H as f,P as m,b as c,A as g}from"./three-DqSm6AO7.js";import{b as a}from"./vendor-C-O1d60-.js";class r{static instance;contexts=new Set;maxContexts=4;constructor(){}static getInstance(){return r.instance||(r.instance=new r),r.instance}register(t){return this.contexts.size>=this.maxContexts?(console.warn(`WebGL context limit reached (${this.maxContexts}). Consider reducing Canvas instances.`),!1):(this.contexts.add(t),!0)}unregister(t){this.contexts.delete(t)}getActiveContextCount(){return this.contexts.size}canCreateContext(){return this.contexts.size<this.maxContexts}}const j=()=>{const s=a.useRef(null),t=r.getInstance();return a.useEffect(()=>()=>{s.current&&t.unregister(s.current)},[t]),{contextRef:s,registerContext:n=>t.register(n)?(s.current=n,!0):!1,canCreate:()=>t.canCreateContext()}},C=({isMobile:s,onLoaded:t})=>{const n=c("./desktop_pc/scene.gltf"),[o,d]=a.useState(!1);return a.useEffect(()=>{n.scene&&!o&&(d(!0),t?.())},[n.scene,o,t]),e.jsxs("mesh",{children:[e.jsx("hemisphereLight",{intensity:.5,groundColor:"black"}),e.jsx("pointLight",{intensity:3,position:[0,5,0]}),e.jsx("spotLight",{position:[-20,50,10],angle:.12,penumbra:1,intensity:2,castShadow:!0,"shadow-mapSize":1024}),e.jsx("ambientLight",{intensity:.7}),e.jsx("directionalLight",{intensity:1,position:[5,5,5]}),e.jsx("primitive",{object:n.scene,scale:s?[.6,.6,.6]:[.8,.8,.8],position:s?[0,-1.5,-1.5]:[0,-2,-.5],rotation:[-.01,-.2,-.1]})]})},y=()=>{const[s,t]=a.useState(!1),{progress:n}=u(),o=j(),d=()=>{};return a.useEffect(()=>{const i=window.matchMedia("(max-width: 500px)");t(i.matches);const l=p=>{t(p.matches)};return i.addEventListener("change",l),()=>{i.removeEventListener("change",l)}},[]),e.jsxs(h,{shadows:!0,frameloop:"always",dpr:[1,2],camera:{position:[10,3,5],fov:30},gl:{preserveDrawingBuffer:!0,antialias:!0,powerPreference:"high-performance",alpha:!1,stencil:!1,depth:!0,failIfMajorPerformanceCaveat:!1},style:{pointerEvents:"auto",touchAction:"none"},onCreated:({gl:i})=>{const l=i.getContext();l&&o.registerContext&&o.registerContext(l)},children:[e.jsxs(a.Suspense,{fallback:e.jsx(f,{center:!0,children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[e.jsx("div",{className:"text-white text-2xl font-bold mb-4",children:"Loading 3D Model..."}),e.jsxs("div",{className:"text-white text-lg",children:[Math.round(n),"%"]}),e.jsx("div",{className:"w-48 h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${n}%`}})})]})}),children:[e.jsx(x,{enablePan:!0,enableZoom:!0,enableRotate:!0,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/4,maxDistance:10,minDistance:3}),e.jsx(C,{isMobile:s,onLoaded:d})]}),e.jsx(m,{all:!0})]})};c.preload("./desktop_pc/scene.gltf");const v=()=>{const s=c("./planet/scene.gltf");return e.jsx("primitive",{object:s.scene,scale:2.5,"position-y":0,"rotation-y":0})},P=()=>{const{progress:s}=u();return e.jsx(h,{shadows:!0,frameloop:"demand",dpr:1,gl:{preserveDrawingBuffer:!1,antialias:!1,powerPreference:"high-performance",alpha:!1,stencil:!1,depth:!0,failIfMajorPerformanceCaveat:!1},camera:{fov:45,near:.1,far:200,position:[-4,3,6]},onCreated:({gl:t})=>{t.toneMapping=g,t.toneMappingExposure=.5},children:e.jsxs(a.Suspense,{fallback:e.jsx(f,{center:!0,children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[e.jsx("div",{className:"text-white text-2xl font-bold mb-4",children:"Loading Earth Model..."}),e.jsxs("div",{className:"text-white text-lg",children:[Math.round(s),"%"]}),e.jsx("div",{className:"w-48 h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-300",style:{width:`${s}%`}})})]})}),children:[e.jsx(x,{autoRotate:!0,enablePan:!1,enableZoom:!1,maxPolarAngle:Math.PI/2,minPolarAngle:Math.PI/2}),e.jsx(v,{}),e.jsx(m,{all:!0})]})})};c.preload("./planet/scene.gltf");export{y as C,P as E};
